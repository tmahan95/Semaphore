---
- hosts: Kubernetes_Master
  tasks: 

  - name: Download metrics-server manifest to the cluster.
    ansible.builtin.get_url:
      url: https://raw.githubusercontent.com/projectcalico/calico/v3.28.2/manifests/tigera-operator.yaml
      dest: ~/calico-tigera-operator.yaml
      mode: '0664'
      validate_certs: false
    
  - name: apply manifest tigera-operator manifest
    kubernetes.core.k8s:
      src: "~/calico-tigera-operator.yaml"
      state: present
      
  #- name: apply manifest tigera-operator resources
  #  kubernetes.core.k8s:
  #    src: "https://raw.githubusercontent.com/projectcalico/calico/v3.28.2/manifests/custom-resources.yaml"
  #    state: present
...
